
<div class="fullpage">

    <div *ngIf="players">
        <h1>Giocatori {{shared.player.name}}</h1>
        <div *ngFor="let player of players">
            {{player.name}}
            <span *ngIf="tables && shared.player.uuid != player.uuid" (click)="createTableWithPlayer(player)">invitalo ad un nuovo tavolo!</span>
        </div>
    </div>
    
    <div *ngIf="tables">
        <h1>Tavoli</h1>
        <div *ngFor="let table of tables">
            <div>Tavolo {{table.uuid}}</div>
            <div *ngIf="table.owner.uuid === shared.player.uuid" (click)="dropTable(table)">drop table</div>
            <div>Owner: {{table.owner.name}}</div>
            <div>
                <div *ngFor="let seat of table.seats">
                    {{seat.open}} {{seat.pending}} {{seat.player && seat.player.name}}
                    <div *ngIf="seat.pending && seat.player && seat.player.uuid === shared.player.uuid">
                        <span (click)="acceptInvitation(table, seat, true)">accetta</span>
                        <span (click)="acceptInvitation(table, seat, false)">rifiuta</span>
                    </div>
                </div>
            </div>
            <div *ngIf="shared.player.uuid === table.owner.uuid">Invite players
                <div *ngFor="let player of tableAvailablePlayers(table)">
                    <div (click)="includePlayer(table, player)">{{player.name}}</div>                 
                </div>
                <div *ngIf="tableCanStart(table)" (click)="startTable(table)">Inizia!</div>
            </div>
        </div>
    </div>
    
    <div *ngIf="tables" (click)="createTable()">Nuovo tavolo</div>

</div>
